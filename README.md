# Homework3

For this homework, you will develop a web site "Five Thousand Characters", a site that allows users to post and rate each others writings.

# What Your Site Should Look Like
The site should consist of three main views: The Landing Page view, the Write Something view, the Read A Story view. 

## The Landing View
The landing page should have centered at its top in an h1 tag, `"Five Thousand Characters"`. This should also be the title of the page. Beneath this there should be a link: `Write Something!` that takes one to the Write Something view. Under this link, it should say: `Check out what people are writing...` There should be a form consisting of a text field with placeholder Phrase Filter, a dropdown populated from a database table of genres with the default genre being `"All Genres"`, and a Go button. Beneath this should be three, h3-titled ordered lists: `Highest Rated`, `Most Viewed`, and `Newest`. Each ordered list should have the top ten items from the database tables for story ordered according to the respective domain, i.e., either rating, views, or submission date. A list item in the list should consist of a link to the story view page presenting that story with link text the title of the story. The form mentioned above should have method control how the three top ten lists are filtered. Initially, it is blank and and "All Genres" is chosen, so no filtering is done. However, if the Phrase Filter has some non-empty value, then only stories containing that value in the title should be considered for the top ten list. Similarly, if genre is set to something other than `"All Genres"`, then the top ten lists are restricted to just that genres. As an example, suppose the Phrase Filter was "Cute Puppies" and the genre was Crime. Then the top ten lists items would be: the Highest Rated stories with title containing `"Cute Puppies"` in the Crime genre, the Most Viewed stories with title containing `"Cute Puppies"` in the Crime genre, and the Newest stories with title containing `"Cute Puppies"` in the Crime genre. You should store the the current value of the Phrase Filter and Genre in a session, so that if a user comes back the values are set to what they had the last time they visited the site. Your program should clean any data sent from the form.

## The Write Something View
This view should have as title `"Five Thousand Characters - Write Something"`. This should also appear at the top of the page in a centered h1-tag, where `"Five Thousand Characters"` is a link taking one back to the landing page. Beneath this should be a form with three text fields, a select tag, and a textarea. The first text field should be labeled `"Title"`, the second text field should be labeled `"Author"`, the third text field should be labeled `"Identifier"`, the select tag should be labeled `"Genre"` and it should allow multiple genre's to be select, and finally the text area should be labeled your writing. Beneath all of these items should be two buttons, a Reset and a Save button. The Reset button clears the data of the form. Clicking the Save button should save a story to the appropriate database tables. The form method should be post and the **`POST-REDIRECT-GET`** design pattern should be used. After saving, the user should still see their story and other info. Your controllers should clean any data sent from this form, there should be a fixed maximum length for each of the fields which is specified in your `configs/Config.php` file, and the maximum length of the textarea data should be 5000 characters. You should display some kind of error generated by the server (not client side) if data size limits were exceeded. If a user clicks on Write Something! on the landing page and comes to this view where nothing is filled in, enters an identifier, and clicks Save; your program should try to look up in the database to find a story with that identifier, and if so, show all the fields of that story for editing. 

## The Read A Story View
This view is reached when someone clicks on a story link from the landing page. This view should have as title `"Five Thousand Characters - Story Title"`. Here `"Story Title"` is the title of the story that the link from the landing page had. `"Five Thousand Characters - Story Title"` should also appear at the top of the page in a centered h1-tag, where `"Five Thousand Characters"` is a link taking one back to the landing page. Beneath this centered in a div tag should appear the author, and beneath this the date the story was first saved. Finally, beneath this there should be the text `"Your rating:"` followed by the numbers 1 to 5 and then `"Average Rating:"` followed by the current average rating. If the user has already given a rating, the rated number should be in bold face and none of the numbers should be links. If the user has not rated the story, each of these numbers should be links. When a user clicks a rating's link, two columns in a database table row associated with the stories identifier should be adjusted: the **`SUM_OF_RATINGS_SO_FAR`** and the **`NUMBER_OF_RATINGS_SO_FAR`**. These two values are used to compute the current average rating. To prevent, in a crude way, people from voting multiple times and to decide whether to display rating's links or not, you should store in the current session the identifiers of the stories that the current user has rated. Under the ratings info should appear the actual story that was saved. This should appear in a sequence of paragraph tags. New paragraphs should be output whenever the original text that was saved had two consecutive new line characters.